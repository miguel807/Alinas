import{u as Ze,a as qt,d as Ot,b as Ft,f as St,e as Xt,Q as Ue}from"./QInput.66be7811.js";import{c as Re,a as v,h as k,f as Pt,r as O,w as ne,v as Yt,T as Gt,o as et,g as tt,ag as Jt,s as ve,q as Zt,ar as el,A as tl,ae as ll,at as ul,y as oe,as as ol,aD as nl,a8 as je,V as It,aE as Fe,j as al,av as Ve,au as il,b as rl,E as sl,B as cl,F as Ce,L as We,U as Pe,W as Xe,N as ht,R as dl,P as Ie,I as Ye,G as Ge,am as fl,Q as yt,O as vl,ao as ml}from"./index.a8db99c8.js";import{a as gl,Q as Sl}from"./QFile.8e106b08.js";import{Q as hl,a as yl}from"./QItem.d7b63b8b.js";import{u as bl,a as wl,v as bt,b as pl,c as Vl,d as Cl,e as kl,f as xl,g as Al,k as ql,l as Ol,r as wt,m as pt,s as Fl,p as Vt,n as Pl,h as Il,o as El,Q as Ml}from"./QDialog.c44e9543.js";import{u as Tl,a as _l,b as zl,c as Bl,g as Hl}from"./use-prevent-scroll.7f0df072.js";import{u as Rl,a as Dl}from"./use-dark.93d8ea25.js";import{b as Ll}from"./focus-manager.02955f48.js";import{u as Nl,a as $l}from"./use-form.7422adbb.js";import{n as Ct}from"./format.2a3572e1.js";import{a as kt}from"./api.45c934da.js";import{F as Kl}from"./fetchData.11d9e322.js";import{u as Ql}from"./use-quasar.ff238c4f.js";var Ul=Re({name:"QField",inheritAttrs:!1,props:{...Ze,tag:{type:String,default:"label"}},emits:qt,setup(){return Ot(Ft({requiredForAttr:!1,tagProp:!0}))}}),jl=Re({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(e,{slots:s}){const r=v(()=>parseInt(e.lines,10)),m=v(()=>"q-item__label"+(e.overline===!0?" q-item__label--overline text-overline":"")+(e.caption===!0?" q-item__label--caption text-caption":"")+(e.header===!0?" q-item__label--header":"")+(r.value===1?" ellipsis":"")),p=v(()=>e.lines!==void 0&&r.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":r.value}:null);return()=>k("div",{style:p.value,class:m.value},Pt(s.default))}}),Wl=Re({name:"QMenu",inheritAttrs:!1,props:{...bl,...Tl,...Rl,...wl,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:bt},self:{type:String,validator:bt},offset:{type:Array,validator:pl},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[..._l,"click","escapeKey"],setup(e,{slots:s,emit:r,attrs:m}){let p=null,i,C,y;const d=tt(),{proxy:I}=d,{$q:c}=I,S=O(null),b=O(!1),x=v(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),M=Dl(e,c),{registerTick:N,removeTick:R}=Vl(),{registerTimeout:F}=zl(),{transitionProps:E,transitionStyle:V}=Cl(e),{localScrollTarget:T,changeScrollEvent:me,unconfigureScrollTarget:_}=kl(e,h),{anchorEl:K,canShow:Z}=xl({showing:b}),{hide:te}=Bl({showing:b,canShow:Z,handleShow:re,handleHide:l,hideOnRouteChange:x,processOnMount:!0}),{showPortal:W,hidePortal:ae,renderPortal:$}=Al(d,S,B,"menu"),ee={anchorEl:K,innerRef:S,onClickOutside(u){if(e.persistent!==!0&&b.value===!0)return te(u),(u.type==="touchstart"||u.target.classList.contains("q-dialog__backdrop"))&&ve(u),!0}},ie=v(()=>Vt(e.anchor||(e.cover===!0?"center middle":"bottom start"),c.lang.rtl)),le=v(()=>e.cover===!0?ie.value:Vt(e.self||"top start",c.lang.rtl)),U=v(()=>(e.square===!0?" q-menu--square":"")+(M.value===!0?" q-menu--dark q-dark":"")),xe=v(()=>e.autoClose===!0?{onClick:A}:{}),ue=v(()=>b.value===!0&&e.persistent!==!0);ne(ue,u=>{u===!0?(Pl(w),Il(ee)):(pt(w),wt(ee))});function X(){Ll(()=>{let u=S.value;u&&u.contains(document.activeElement)!==!0&&(u=u.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||u.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||u.querySelector("[autofocus], [data-autofocus]")||u,u.focus({preventScroll:!0}))})}function re(u){if(p=e.noRefocus===!1?document.activeElement:null,ql(z),W(),h(),i=void 0,u!==void 0&&(e.touchPosition||e.contextMenu)){const D=Yt(u);if(D.left!==void 0){const{top:Y,left:ge}=K.value.getBoundingClientRect();i={left:D.left-ge,top:D.top-Y}}}C===void 0&&(C=ne(()=>c.screen.width+"|"+c.screen.height+"|"+e.self+"|"+e.anchor+"|"+c.lang.rtl,g)),e.noFocus!==!0&&document.activeElement.blur(),N(()=>{g(),e.noFocus!==!0&&X()}),F(()=>{c.platform.is.ios===!0&&(y=e.autoClose,S.value.click()),g(),W(!0),r("show",u)},e.transitionDuration)}function l(u){R(),ae(),n(!0),p!==null&&(u===void 0||u.qClickOutside!==!0)&&(((u&&u.type.indexOf("key")===0?p.closest('[tabindex]:not([tabindex^="-"])'):void 0)||p).focus(),p=null),F(()=>{ae(!0),r("hide",u)},e.transitionDuration)}function n(u){i=void 0,C!==void 0&&(C(),C=void 0),(u===!0||b.value===!0)&&(Ol(z),_(),wt(ee),pt(w)),u!==!0&&(p=null)}function h(){(K.value!==null||e.scrollTarget!==void 0)&&(T.value=Hl(K.value,e.scrollTarget),me(T.value,g))}function A(u){y!==!0?(El(I,u),r("click",u)):y=!1}function z(u){ue.value===!0&&e.noFocus!==!0&&Jt(S.value,u.target)!==!0&&X()}function w(u){r("escapeKey"),te(u)}function g(){Fl({targetEl:S.value,offset:e.offset,anchorEl:K.value,anchorOrigin:ie.value,selfOrigin:le.value,absoluteOffset:i,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function B(){return k(Gt,E.value,()=>b.value===!0?k("div",{role:"menu",...m,ref:S,tabindex:-1,class:["q-menu q-position-engine scroll"+U.value,m.class],style:[m.style,V.value],...xe.value},Pt(s.default)):null)}return et(n),Object.assign(I,{focus:X,updatePosition:g}),$}});let He=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const s=document.createElement("div");Object.assign(s.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(s),e.scrollLeft=-1e3,He=e.scrollLeft>=0,e.remove()}const j=1e3,Xl=["start","center","end","start-force","center-force","end-force"],Et=Array.prototype.filter,Yl=window.getComputedStyle(document.body).overflowAnchor===void 0?Zt:function(e,s){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const r=e.children||[];Et.call(r,p=>p.dataset&&p.dataset.qVsAnchor!==void 0).forEach(p=>{delete p.dataset.qVsAnchor});const m=r[s];m&&m.dataset&&(m.dataset.qVsAnchor="")}))};function ke(e,s){return e+s}function Je(e,s,r,m,p,i,C,y){const d=e===window?document.scrollingElement||document.documentElement:e,I=p===!0?"offsetWidth":"offsetHeight",c={scrollStart:0,scrollViewSize:-C-y,scrollMaxSize:0,offsetStart:-C,offsetEnd:-y};if(p===!0?(e===window?(c.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,c.scrollViewSize+=document.documentElement.clientWidth):(c.scrollStart=d.scrollLeft,c.scrollViewSize+=d.clientWidth),c.scrollMaxSize=d.scrollWidth,i===!0&&(c.scrollStart=(He===!0?c.scrollMaxSize-c.scrollViewSize:0)-c.scrollStart)):(e===window?(c.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,c.scrollViewSize+=document.documentElement.clientHeight):(c.scrollStart=d.scrollTop,c.scrollViewSize+=d.clientHeight),c.scrollMaxSize=d.scrollHeight),r!==null)for(let S=r.previousElementSibling;S!==null;S=S.previousElementSibling)S.classList.contains("q-virtual-scroll--skip")===!1&&(c.offsetStart+=S[I]);if(m!==null)for(let S=m.nextElementSibling;S!==null;S=S.nextElementSibling)S.classList.contains("q-virtual-scroll--skip")===!1&&(c.offsetEnd+=S[I]);if(s!==e){const S=d.getBoundingClientRect(),b=s.getBoundingClientRect();p===!0?(c.offsetStart+=b.left-S.left,c.offsetEnd-=b.width):(c.offsetStart+=b.top-S.top,c.offsetEnd-=b.height),e!==window&&(c.offsetStart+=c.scrollStart),c.offsetEnd+=c.scrollMaxSize-c.offsetStart}return c}function xt(e,s,r,m){s==="end"&&(s=(e===window?document.body:e)[r===!0?"scrollWidth":"scrollHeight"]),e===window?r===!0?(m===!0&&(s=(He===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-s),window.scrollTo(s,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,s):r===!0?(m===!0&&(s=(He===!0?e.scrollWidth-e.offsetWidth:0)-s),e.scrollLeft=s):e.scrollTop=s}function Ee(e,s,r,m){if(r>=m)return 0;const p=s.length,i=Math.floor(r/j),C=Math.floor((m-1)/j)+1;let y=e.slice(i,C).reduce(ke,0);return r%j!==0&&(y-=s.slice(i*j,r).reduce(ke,0)),m%j!==0&&m!==p&&(y-=s.slice(m,C*j).reduce(ke,0)),y}const Gl={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},Jl={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...Gl};function Zl({virtualScrollLength:e,getVirtualScrollTarget:s,getVirtualScrollEl:r,virtualScrollItemSizeComputed:m}){const p=tt(),{props:i,emit:C,proxy:y}=p,{$q:d}=y;let I,c,S,b=[],x;const M=O(0),N=O(0),R=O({}),F=O(null),E=O(null),V=O(null),T=O({from:0,to:0}),me=v(()=>i.tableColspan!==void 0?i.tableColspan:100);m===void 0&&(m=v(()=>i.virtualScrollItemSize));const _=v(()=>m.value+";"+i.virtualScrollHorizontal),K=v(()=>_.value+";"+i.virtualScrollSliceRatioBefore+";"+i.virtualScrollSliceRatioAfter);ne(K,()=>{U()}),ne(_,Z);function Z(){le(c,!0)}function te(l){le(l===void 0?c:l)}function W(l,n){const h=s();if(h==null||h.nodeType===8)return;const A=Je(h,r(),F.value,E.value,i.virtualScrollHorizontal,d.lang.rtl,i.virtualScrollStickySizeStart,i.virtualScrollStickySizeEnd);S!==A.scrollViewSize&&U(A.scrollViewSize),$(h,A,Math.min(e.value-1,Math.max(0,parseInt(l,10)||0)),0,Xl.indexOf(n)>-1?n:c>-1&&l>c?"end":"start")}function ae(){const l=s();if(l==null||l.nodeType===8)return;const n=Je(l,r(),F.value,E.value,i.virtualScrollHorizontal,d.lang.rtl,i.virtualScrollStickySizeStart,i.virtualScrollStickySizeEnd),h=e.value-1,A=n.scrollMaxSize-n.offsetStart-n.offsetEnd-N.value;if(I===n.scrollStart)return;if(n.scrollMaxSize<=0){$(l,n,0,0);return}S!==n.scrollViewSize&&U(n.scrollViewSize),ee(T.value.from);const z=Math.floor(n.scrollMaxSize-Math.max(n.scrollViewSize,n.offsetEnd)-Math.min(x[h],n.scrollViewSize/2));if(z>0&&Math.ceil(n.scrollStart)>=z){$(l,n,h,n.scrollMaxSize-n.offsetEnd-b.reduce(ke,0));return}let w=0,g=n.scrollStart-n.offsetStart,B=g;if(g<=A&&g+n.scrollViewSize>=M.value)g-=M.value,w=T.value.from,B=g;else for(let u=0;g>=b[u]&&w<h;u++)g-=b[u],w+=j;for(;g>0&&w<h;)g-=x[w],g>-n.scrollViewSize?(w++,B=g):B=x[w]+g;$(l,n,w,B)}function $(l,n,h,A,z){const w=typeof z=="string"&&z.indexOf("-force")>-1,g=w===!0?z.replace("-force",""):z,B=g!==void 0?g:"start";let u=Math.max(0,h-R.value[B]),D=u+R.value.total;D>e.value&&(D=e.value,u=Math.max(0,D-R.value.total)),I=n.scrollStart;const Y=u!==T.value.from||D!==T.value.to;if(Y===!1&&g===void 0){ue(h);return}const{activeElement:ge}=document,G=V.value;Y===!0&&G!==null&&G!==ge&&G.contains(ge)===!0&&(G.addEventListener("focusout",ie),setTimeout(()=>{G!==null&&G.removeEventListener("focusout",ie)})),Yl(G,h-u);const Me=g!==void 0?x.slice(u,h).reduce(ke,0):0;if(Y===!0){const se=D>=T.value.from&&u<=T.value.to?T.value.to:D;T.value={from:u,to:se},M.value=Ee(b,x,0,u),N.value=Ee(b,x,D,e.value),requestAnimationFrame(()=>{T.value.to!==D&&I===n.scrollStart&&(T.value={from:T.value.from,to:D},N.value=Ee(b,x,D,e.value))})}requestAnimationFrame(()=>{if(I!==n.scrollStart)return;Y===!0&&ee(u);const se=x.slice(u,h).reduce(ke,0),ce=se+n.offsetStart+M.value,Te=ce+x[h];let Ae=ce+A;if(g!==void 0){const De=se-Me,qe=n.scrollStart+De;Ae=w!==!0&&qe<ce&&Te<qe+n.scrollViewSize?qe:g==="end"?Te-n.scrollViewSize:ce-(g==="start"?0:Math.round((n.scrollViewSize-x[h])/2))}I=Ae,xt(l,Ae,i.virtualScrollHorizontal,d.lang.rtl),ue(h)})}function ee(l){const n=V.value;if(n){const h=Et.call(n.children,u=>u.classList&&u.classList.contains("q-virtual-scroll--skip")===!1),A=h.length,z=i.virtualScrollHorizontal===!0?u=>u.getBoundingClientRect().width:u=>u.offsetHeight;let w=l,g,B;for(let u=0;u<A;){for(g=z(h[u]),u++;u<A&&h[u].classList.contains("q-virtual-scroll--with-prev")===!0;)g+=z(h[u]),u++;B=g-x[w],B!==0&&(x[w]+=B,b[Math.floor(w/j)]+=B),w++}}}function ie(){V.value!==null&&V.value!==void 0&&V.value.focus()}function le(l,n){const h=1*m.value;(n===!0||Array.isArray(x)===!1)&&(x=[]);const A=x.length;x.length=e.value;for(let w=e.value-1;w>=A;w--)x[w]=h;const z=Math.floor((e.value-1)/j);b=[];for(let w=0;w<=z;w++){let g=0;const B=Math.min((w+1)*j,e.value);for(let u=w*j;u<B;u++)g+=x[u];b.push(g)}c=-1,I=void 0,M.value=Ee(b,x,0,T.value.from),N.value=Ee(b,x,T.value.to,e.value),l>=0?(ee(T.value.from),oe(()=>{W(l)})):X()}function U(l){if(l===void 0&&typeof window!="undefined"){const g=s();g!=null&&g.nodeType!==8&&(l=Je(g,r(),F.value,E.value,i.virtualScrollHorizontal,d.lang.rtl,i.virtualScrollStickySizeStart,i.virtualScrollStickySizeEnd).scrollViewSize)}S=l;const n=parseFloat(i.virtualScrollSliceRatioBefore)||0,h=parseFloat(i.virtualScrollSliceRatioAfter)||0,A=1+n+h,z=l===void 0||l<=0?1:Math.ceil(l/m.value),w=Math.max(1,z,Math.ceil((i.virtualScrollSliceSize>0?i.virtualScrollSliceSize:10)/A));R.value={total:Math.ceil(w*A),start:Math.ceil(w*n),center:Math.ceil(w*(.5+n)),end:Math.ceil(w*(1+n)),view:z}}function xe(l,n){const h=i.virtualScrollHorizontal===!0?"width":"height",A={["--q-virtual-scroll-item-"+h]:m.value+"px"};return[l==="tbody"?k(l,{class:"q-virtual-scroll__padding",key:"before",ref:F},[k("tr",[k("td",{style:{[h]:`${M.value}px`,...A},colspan:me.value})])]):k(l,{class:"q-virtual-scroll__padding",key:"before",ref:F,style:{[h]:`${M.value}px`,...A}}),k(l,{class:"q-virtual-scroll__content",key:"content",ref:V,tabindex:-1},n.flat()),l==="tbody"?k(l,{class:"q-virtual-scroll__padding",key:"after",ref:E},[k("tr",[k("td",{style:{[h]:`${N.value}px`,...A},colspan:me.value})])]):k(l,{class:"q-virtual-scroll__padding",key:"after",ref:E,style:{[h]:`${N.value}px`,...A}})]}function ue(l){c!==l&&(i.onVirtualScroll!==void 0&&C("virtualScroll",{index:l,from:T.value.from,to:T.value.to-1,direction:l<c?"decrease":"increase",ref:y}),c=l)}U();const X=el(ae,d.platform.is.ios===!0?120:35);tl(()=>{U()});let re=!1;return ll(()=>{re=!0}),ul(()=>{if(re!==!0)return;const l=s();I!==void 0&&l!==void 0&&l!==null&&l.nodeType!==8?xt(l,I,i.virtualScrollHorizontal,d.lang.rtl):W(c)}),et(()=>{X.cancel()}),Object.assign(y,{scrollTo:W,reset:Z,refresh:te}),{virtualScrollSliceRange:T,virtualScrollSliceSizeComputed:R,setVirtualScrollSize:U,onVirtualScrollEvt:X,localResetVirtualScroll:le,padVirtualScroll:xe,scrollTo:W,reset:Z,refresh:te}}const At=e=>["add","add-unique","toggle"].includes(e),eu=".*+?^${}()|[]\\",tu=Object.keys(Ze);var lu=Re({name:"QSelect",inheritAttrs:!1,props:{...Jl,...Nl,...Ze,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:At},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function},emits:[...qt,"add","remove","inputValue","newValue","keyup","keypress","keydown","filterAbort"],setup(e,{slots:s,emit:r}){const{proxy:m}=tt(),{$q:p}=m,i=O(!1),C=O(!1),y=O(-1),d=O(""),I=O(!1),c=O(!1);let S=null,b=null,x,M,N,R=null,F,E,V,T;const me=O(null),_=O(null),K=O(null),Z=O(null),te=O(null),W=$l(e),ae=Xt(dt),$=v(()=>Array.isArray(e.options)?e.options.length:0),ee=v(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:ie,virtualScrollSliceSizeComputed:le,localResetVirtualScroll:U,padVirtualScroll:xe,onVirtualScrollEvt:ue,scrollTo:X,setVirtualScrollSize:re}=Zl({virtualScrollLength:$,getVirtualScrollTarget:zt,getVirtualScrollEl:st,virtualScrollItemSizeComputed:ee}),l=Ft(),n=v(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,a=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const o=e.mapOptions===!0&&x!==void 0?x:[],f=a.map(P=>_t(P,o));return e.modelValue===null&&t===!0?f.filter(P=>P!==null):f}return a}),h=v(()=>{const t={};return tu.forEach(a=>{const o=e[a];o!==void 0&&(t[a]=o)}),t}),A=v(()=>e.optionsDark===null?l.isDark.value:e.optionsDark),z=v(()=>St(n.value)),w=v(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||n.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),g=v(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),B=v(()=>$.value===0),u=v(()=>n.value.map(t=>Q.value(t)).join(", ")),D=v(()=>e.displayValue!==void 0?e.displayValue:u.value),Y=v(()=>e.optionsHtml===!0?()=>!0:t=>t!=null&&t.html===!0),ge=v(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||n.value.some(Y.value))),G=v(()=>l.focused.value===!0?e.tabindex:-1),Me=v(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":i.value===!0?"true":"false","aria-controls":`${l.targetUid.value}_lb`};return y.value>=0&&(t["aria-activedescendant"]=`${l.targetUid.value}_${y.value}`),t}),se=v(()=>({id:`${l.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),ce=v(()=>n.value.map((t,a)=>({index:a,opt:t,html:Y.value(t),selected:!0,removeAtIndex:Tt,toggleOption:de,tabindex:G.value}))),Te=v(()=>{if($.value===0)return[];const{from:t,to:a}=ie.value;return e.options.slice(t,a).map((o,f)=>{const P=Se.value(o)===!0,q=$e(o)===!0,L=t+f,H={clickable:!0,active:q,activeClass:qe.value,manualFocus:!0,focused:!1,disable:P,tabindex:-1,dense:e.optionsDense,dark:A.value,role:"option","aria-selected":q===!0?"true":"false",id:`${l.targetUid.value}_${L}`,onClick:()=>{de(o)}};return P!==!0&&(y.value===L&&(H.focused=!0),p.platform.is.desktop===!0&&(H.onMousemove=()=>{i.value===!0&&he(L)})),{index:L,opt:o,html:Y.value(o),label:Q.value(o),selected:H.active,focused:H.focused,toggleOption:de,setOptionIndex:he,itemProps:H}})}),Ae=v(()=>e.dropdownIcon!==void 0?e.dropdownIcon:p.iconSet.arrow.dropdown),De=v(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),qe=v(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),J=v(()=>Ne(e.optionValue,"value")),Q=v(()=>Ne(e.optionLabel,"label")),Se=v(()=>Ne(e.optionDisable,"disable")),_e=v(()=>n.value.map(t=>J.value(t))),Mt=v(()=>{const t={onInput:dt,onChange:ae,onKeydown:rt,onKeyup:at,onKeypress:it,onFocus:ot,onClick(a){M===!0&&Ve(a)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=ae,t});ne(n,t=>{x=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&l.innerLoading.value!==!0&&(C.value!==!0&&i.value!==!0||z.value!==!0)&&(N!==!0&&pe(),(C.value===!0||i.value===!0)&&ye(""))},{immediate:!0}),ne(()=>e.fillInput,pe),ne(i,Ke),ne($,Wt);function lt(t){return e.emitValue===!0?J.value(t):t}function Le(t){if(t>-1&&t<n.value.length)if(e.multiple===!0){const a=e.modelValue.slice();r("remove",{index:t,value:a.splice(t,1)[0]}),r("update:modelValue",a)}else r("update:modelValue",null)}function Tt(t){Le(t),l.focus()}function ut(t,a){const o=lt(t);if(e.multiple!==!0){e.fillInput===!0&&Oe(Q.value(t),!0,!0),r("update:modelValue",o);return}if(n.value.length===0){r("add",{index:0,value:o}),r("update:modelValue",e.multiple===!0?[o]:o);return}if(a===!0&&$e(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const f=e.modelValue.slice();r("add",{index:f.length,value:o}),f.push(o),r("update:modelValue",f)}function de(t,a){if(l.editable.value!==!0||t===void 0||Se.value(t)===!0)return;const o=J.value(t);if(e.multiple!==!0){a!==!0&&(Oe(e.fillInput===!0?Q.value(t):"",!0,!0),fe()),_.value!==null&&_.value.focus(),(n.value.length===0||Fe(J.value(n.value[0]),o)!==!0)&&r("update:modelValue",e.emitValue===!0?o:t);return}if((M!==!0||I.value===!0)&&l.focus(),ot(),n.value.length===0){const q=e.emitValue===!0?o:t;r("add",{index:0,value:q}),r("update:modelValue",e.multiple===!0?[q]:q);return}const f=e.modelValue.slice(),P=_e.value.findIndex(q=>Fe(q,o));if(P>-1)r("remove",{index:P,value:f.splice(P,1)[0]});else{if(e.maxValues!==void 0&&f.length>=e.maxValues)return;const q=e.emitValue===!0?o:t;r("add",{index:f.length,value:q}),f.push(q)}r("update:modelValue",f)}function he(t){if(p.platform.is.desktop!==!0)return;const a=t>-1&&t<$.value?t:-1;y.value!==a&&(y.value=a)}function ze(t=1,a){if(i.value===!0){let o=y.value;do o=Ct(o+t,-1,$.value-1);while(o!==-1&&o!==y.value&&Se.value(e.options[o])===!0);y.value!==o&&(he(o),X(o),a!==!0&&e.useInput===!0&&e.fillInput===!0&&Be(o>=0?Q.value(e.options[o]):F,!0))}}function _t(t,a){const o=f=>Fe(J.value(f),t);return e.options.find(o)||a.find(o)||t}function Ne(t,a){const o=t!==void 0?t:a;return typeof o=="function"?o:f=>f!==null&&typeof f=="object"&&o in f?f[o]:f}function $e(t){const a=J.value(t);return _e.value.find(o=>Fe(o,a))!==void 0}function ot(t){e.useInput===!0&&_.value!==null&&(t===void 0||_.value===t.target&&t.target.value===u.value)&&_.value.select()}function nt(t){al(t,27)===!0&&i.value===!0&&(Ve(t),fe(),pe()),r("keyup",t)}function at(t){const{value:a}=t.target;if(t.keyCode!==void 0){nt(t);return}if(t.target.value="",S!==null&&(clearTimeout(S),S=null),b!==null&&(clearTimeout(b),b=null),pe(),typeof a=="string"&&a.length!==0){const o=a.toLocaleLowerCase(),f=q=>{const L=e.options.find(H=>q.value(H).toLocaleLowerCase()===o);return L===void 0?!1:(n.value.indexOf(L)===-1?de(L):fe(),!0)},P=q=>{f(J)!==!0&&(f(Q)===!0||q===!0||ye(a,!0,()=>P(!0)))};P()}else l.clearValue(t)}function it(t){r("keypress",t)}function rt(t){if(r("keydown",t),il(t)===!0)return;const a=d.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),o=t.shiftKey!==!0&&e.multiple!==!0&&(y.value>-1||a===!0);if(t.keyCode===27){je(t);return}if(t.keyCode===9&&o===!1){be();return}if(t.target===void 0||t.target.id!==l.targetUid.value||l.editable.value!==!0)return;if(t.keyCode===40&&l.innerLoading.value!==!0&&i.value===!1){ve(t),we();return}if(t.keyCode===8&&(e.useChips===!0||e.clearable===!0)&&e.hideSelected!==!0&&d.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?Le(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&r("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof d.value!="string"||d.value.length===0)&&(ve(t),y.value=-1,ze(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&le.value!==void 0&&(ve(t),y.value=Math.max(-1,Math.min($.value,y.value+(t.keyCode===33?-1:1)*le.value.view)),ze(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(ve(t),ze(t.keyCode===38?-1:1,e.multiple));const f=$.value;if((V===void 0||T<Date.now())&&(V=""),f>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||V.length!==0)){i.value!==!0&&we(t);const P=t.key.toLocaleLowerCase(),q=V.length===1&&V[0]===P;T=Date.now()+1500,q===!1&&(ve(t),V+=P);const L=new RegExp("^"+V.split("").map(Qe=>eu.indexOf(Qe)>-1?"\\"+Qe:Qe).join(".*"),"i");let H=y.value;if(q===!0||H<0||L.test(Q.value(e.options[H]))!==!0)do H=Ct(H+1,-1,f-1);while(H!==y.value&&(Se.value(e.options[H])===!0||L.test(Q.value(e.options[H]))!==!0));y.value!==H&&oe(()=>{he(H),X(H),H>=0&&e.useInput===!0&&e.fillInput===!0&&Be(Q.value(e.options[H]),!0)});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||V!=="")&&(t.keyCode!==9||o===!1))){if(t.keyCode!==9&&ve(t),y.value>-1&&y.value<f){de(e.options[y.value]);return}if(a===!0){const P=(q,L)=>{if(L){if(At(L)!==!0)return}else L=e.newValueMode;if(Oe("",e.multiple!==!0,!0),q==null)return;(L==="toggle"?de:ut)(q,L==="add-unique"),e.multiple!==!0&&(_.value!==null&&_.value.focus(),fe())};if(e.onNewValue!==void 0?r("newValue",d.value,P):P(d.value),e.multiple!==!0)return}i.value===!0?be():l.innerLoading.value!==!0&&we()}}function st(){return M===!0?te.value:K.value!==null&&K.value.contentEl!==null?K.value.contentEl:void 0}function zt(){return st()}function Bt(){return e.hideSelected===!0?[]:s["selected-item"]!==void 0?ce.value.map(t=>s["selected-item"](t)).slice():s.selected!==void 0?[].concat(s.selected()):e.useChips===!0?ce.value.map((t,a)=>k(gl,{key:"option-"+a,removable:l.editable.value===!0&&Se.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:G.value,onRemove(){t.removeAtIndex(a)}},()=>k("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:Q.value(t.opt)}))):[k("span",{[ge.value===!0?"innerHTML":"textContent"]:D.value})]}function ct(){if(B.value===!0)return s["no-option"]!==void 0?s["no-option"]({inputValue:d.value}):void 0;const t=s.option!==void 0?s.option:o=>k(yl,{key:o.index,...o.itemProps},()=>k(hl,()=>k(jl,()=>k("span",{[o.html===!0?"innerHTML":"textContent"]:o.label}))));let a=xe("div",Te.value.map(t));return s["before-options"]!==void 0&&(a=s["before-options"]().concat(a)),rl(s["after-options"],a)}function Ht(t,a){const o=a===!0?{...Me.value,...l.splitAttrs.attributes.value}:void 0,f={ref:a===!0?_:void 0,key:"i_t",class:w.value,style:e.inputStyle,value:d.value!==void 0?d.value:"",type:"search",...o,id:a===!0?l.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...Mt.value};return t!==!0&&M===!0&&(Array.isArray(f.class)===!0?f.class=[...f.class,"no-pointer-events"]:f.class+=" no-pointer-events"),k("input",f)}function dt(t){S!==null&&(clearTimeout(S),S=null),b!==null&&(clearTimeout(b),b=null),!(t&&t.target&&t.target.qComposing===!0)&&(Be(t.target.value||""),N=!0,F=d.value,l.focused.value!==!0&&(M!==!0||I.value===!0)&&l.focus(),e.onFilter!==void 0&&(S=setTimeout(()=>{S=null,ye(d.value)},e.inputDebounce)))}function Be(t,a){d.value!==t&&(d.value=t,a===!0||e.inputDebounce===0||e.inputDebounce==="0"?r("inputValue",t):b=setTimeout(()=>{b=null,r("inputValue",t)},e.inputDebounce))}function Oe(t,a,o){N=o!==!0,e.useInput===!0&&(Be(t,!0),(a===!0||o!==!0)&&(F=t),a!==!0&&ye(t))}function ye(t,a,o){if(e.onFilter===void 0||a!==!0&&l.focused.value!==!0)return;l.innerLoading.value===!0?r("filterAbort"):(l.innerLoading.value=!0,c.value=!0),t!==""&&e.multiple!==!0&&n.value.length!==0&&N!==!0&&t===Q.value(n.value[0])&&(t="");const f=setTimeout(()=>{i.value===!0&&(i.value=!1)},10);R!==null&&clearTimeout(R),R=f,r("filter",t,(P,q)=>{(a===!0||l.focused.value===!0)&&R===f&&(clearTimeout(R),typeof P=="function"&&P(),c.value=!1,oe(()=>{l.innerLoading.value=!1,l.editable.value===!0&&(a===!0?i.value===!0&&fe():i.value===!0?Ke(!0):i.value=!0),typeof q=="function"&&oe(()=>{q(m)}),typeof o=="function"&&oe(()=>{o(m)})}))},()=>{l.focused.value===!0&&R===f&&(clearTimeout(R),l.innerLoading.value=!1,c.value=!1),i.value===!0&&(i.value=!1)})}function Rt(){return k(Wl,{ref:K,class:g.value,style:e.popupContentStyle,modelValue:i.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&B.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:A.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,square:De.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...se.value,onScrollPassive:ue,onBeforeShow:vt,onBeforeHide:Dt,onShow:Lt},ct)}function Dt(t){mt(t),be()}function Lt(){re()}function Nt(t){Ve(t),_.value!==null&&_.value.focus(),I.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function $t(t){Ve(t),oe(()=>{I.value=!1})}function Kt(){const t=[k(Ul,{class:`col-auto ${l.fieldClass.value}`,...h.value,for:l.targetUid.value,dark:A.value,square:!0,loading:c.value,itemAligned:!1,filled:!0,stackLabel:d.value.length!==0,...l.splitAttrs.listeners.value,onFocus:Nt,onBlur:$t},{...s,rawControl:()=>l.getControl(!0),before:void 0,after:void 0})];return i.value===!0&&t.push(k("div",{ref:te,class:g.value+" scroll",style:e.popupContentStyle,...se.value,onClick:je,onScrollPassive:ue},ct())),k(Ml,{ref:Z,modelValue:C.value,position:e.useInput===!0?"top":void 0,transitionShow:E,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:vt,onBeforeHide:Qt,onHide:Ut,onShow:jt},()=>k("div",{class:"q-select__dialog"+(A.value===!0?" q-select__dialog--dark q-dark":"")+(I.value===!0?" q-select__dialog--focused":"")},t))}function Qt(t){mt(t),Z.value!==null&&Z.value.__updateRefocusTarget(l.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),l.focused.value=!1}function Ut(t){fe(),l.focused.value===!1&&r("blur",t),pe()}function jt(){const t=document.activeElement;(t===null||t.id!==l.targetUid.value)&&_.value!==null&&_.value!==t&&_.value.focus(),re()}function be(){C.value!==!0&&(y.value=-1,i.value===!0&&(i.value=!1),l.focused.value===!1&&(R!==null&&(clearTimeout(R),R=null),l.innerLoading.value===!0&&(r("filterAbort"),l.innerLoading.value=!1,c.value=!1)))}function we(t){l.editable.value===!0&&(M===!0?(l.onControlFocusin(t),C.value=!0,oe(()=>{l.focus()})):l.focus(),e.onFilter!==void 0?ye(d.value):(B.value!==!0||s["no-option"]!==void 0)&&(i.value=!0))}function fe(){C.value=!1,be()}function pe(){e.useInput===!0&&Oe(e.multiple!==!0&&e.fillInput===!0&&n.value.length!==0&&Q.value(n.value[0])||"",!0,!0)}function Ke(t){let a=-1;if(t===!0){if(n.value.length!==0){const o=J.value(n.value[0]);a=e.options.findIndex(f=>Fe(J.value(f),o))}U(a)}he(a)}function Wt(t,a){i.value===!0&&l.innerLoading.value===!1&&(U(-1,!0),oe(()=>{i.value===!0&&l.innerLoading.value===!1&&(t>a?U():Ke(!0))}))}function ft(){C.value===!1&&K.value!==null&&K.value.updatePosition()}function vt(t){t!==void 0&&Ve(t),r("popupShow",t),l.hasPopupOpen=!0,l.onControlFocusin(t)}function mt(t){t!==void 0&&Ve(t),r("popupHide",t),l.hasPopupOpen=!1,l.onControlFocusout(t)}function gt(){M=p.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?s["no-option"]!==void 0||e.onFilter!==void 0||B.value===!1:!0),E=p.platform.is.ios===!0&&M===!0&&e.useInput===!0?"fade":e.transitionShow}return ol(gt),nl(ft),gt(),et(()=>{S!==null&&clearTimeout(S),b!==null&&clearTimeout(b)}),Object.assign(m,{showPopup:we,hidePopup:fe,removeAtIndex:Le,add:ut,toggleOption:de,getOptionIndex:()=>y.value,setOptionIndex:he,moveOptionSelection:ze,filter:ye,updateMenuPosition:ft,updateInputValue:Oe,isOptionSelected:$e,getEmittingOptionValue:lt,isOptionDisabled:(...t)=>Se.value.apply(null,t)===!0,getOptionValue:(...t)=>J.value.apply(null,t),getOptionLabel:(...t)=>Q.value.apply(null,t)}),Object.assign(l,{innerValue:n,fieldClass:v(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:me,targetRef:_,hasValue:z,showPopup:we,floatingLabel:v(()=>e.hideSelected!==!0&&z.value===!0||typeof d.value=="number"||d.value.length!==0||St(e.displayValue)),getControlChild:()=>{if(l.editable.value!==!1&&(C.value===!0||B.value!==!0||s["no-option"]!==void 0))return M===!0?Kt():Rt();l.hasPopupOpen===!0&&(l.hasPopupOpen=!1)},controlEvents:{onFocusin(t){l.onControlFocusin(t)},onFocusout(t){l.onControlFocusout(t,()=>{pe(),be()})},onClick(t){if(je(t),M!==!0&&i.value===!0){be(),_.value!==null&&_.value.focus();return}we(t)}},getControl:t=>{const a=Bt(),o=t===!0||C.value!==!0||M!==!0;if(e.useInput===!0)a.push(Ht(t,o));else if(l.editable.value===!0){const P=o===!0?Me.value:void 0;a.push(k("input",{ref:o===!0?_:void 0,key:"d_t",class:"q-select__focus-target",id:o===!0?l.targetUid.value:void 0,value:D.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...P,onKeydown:rt,onKeyup:nt,onKeypress:it})),o===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&a.push(k("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:at}))}if(W.value!==void 0&&e.disable!==!0&&_e.value.length!==0){const P=_e.value.map(q=>k("option",{value:q,selected:!0}));a.push(k("select",{class:"hidden",name:W.value,multiple:e.multiple},P))}const f=e.useInput===!0||o!==!0?void 0:l.splitAttrs.attributes.value;return k("div",{class:"q-field__native row items-center",...f,...l.splitAttrs.listeners.value},a)},getInnerAppend:()=>e.loading!==!0&&c.value!==!0&&e.hideDropdownIcon!==!0?[k(It,{class:"q-select__dropdown-icon"+(i.value===!0?" rotate-180":""),name:Ae.value})]:null}),Ot(l)}});const uu={key:0},ou={style:{color:"#ce0e31"}},nu={key:1},au={style:{width:"30%"}},wu=sl({__name:"EditAndCreateProduct",setup(e){const s=ml(),r=new Kl,m=O(" "),p=O(0),i=O(0),C=O(" "),y=O(""),d=O(null),I=O(0),c=Ql();let S=r.getAllCategories();function b(){c.notify({message:"Producto Creado",color:"negative"})}function x(){c.notify({message:"Producto Editado",color:"negative"})}cl(async()=>{await r.fetchOneProduct(s.params.name);const F=r.getOneProductMethod();await r.fetchAllCategories(),m.value=F.value.name,C.value=F.value.description,p.value=Number(F.value.price),i.value=Number(F.value.grm),y.value=F.value.ingredients});const M=()=>{let F;if(d.value!==null){const E=`${kt.downloadImage}/${d.value.name}`;F={name:m.value,photo:E,price:p.value,description:C.value}}else F={name:m.value,price:p.value,description:C.value};r.updateOneProduct(s.params.name,F,d.value),x()},N=()=>{let F;const E=`${kt.downloadImage}/${d.value.name}`;F={name:m.value,photo:E,price:parseInt(p.value),isVisible:!0,description:C.value||"  ",id_category:I.value.id},r.createOneProduct(F,d.value),b()},R=v(()=>m.value===" "||C.value===" ");return(F,E)=>(Ce(),We(vl,null,[Pe(s).params.name!=="empty"?(Ce(),We("h5",uu,[Xe(" Editar Producto: "),ht("span",ou,dl(Pe(s).params.name),1)])):(Ce(),We("h5",nu,"Crear Nuevo Producto")),ht("div",au,[Ie(Ue,{modelValue:m.value,"onUpdate:modelValue":E[0]||(E[0]=V=>m.value=V),color:"negative",label:"Nombre",rules:[V=>!!V||"Campo es requerido"]},null,8,["modelValue","rules"]),Ie(Ue,{modelValue:p.value,"onUpdate:modelValue":E[1]||(E[1]=V=>p.value=V),label:"Precio",color:"negative",rules:[V=>V>0&&V<1e5||"Digite n\xFAmeros validos"]},null,8,["modelValue","rules"]),Ie(Ue,{modelValue:C.value,"onUpdate:modelValue":E[2]||(E[2]=V=>C.value=V),label:"Descripcion",color:"negative",rules:[V=>!!V||"Campo es requerido"]},null,8,["modelValue","rules"]),Ie(Sl,{outlined:"",modelValue:d.value,"onUpdate:modelValue":E[3]||(E[3]=V=>d.value=V),label:"foto"},{prepend:Ye(()=>[Ie(It,{name:"attach_file"})]),_:1},8,["modelValue"]),Pe(s).params.name==="empty"?(Ce(),Ge(lu,{key:0,modelValue:I.value,"onUpdate:modelValue":E[4]||(E[4]=V=>I.value=V),options:Pe(S),label:"Categoria","option-label":"name","option-value":"id"},null,8,["modelValue","options"])):fl("",!0),Pe(s).params.name!=="empty"?(Ce(),Ge(yt,{key:1,class:"q-mt-lg",color:"negative",onClick:M},{default:Ye(()=>[Xe("Editar producto")]),_:1})):(Ce(),Ge(yt,{key:2,class:"q-mt-lg",color:"negative",disable:R.value,onClick:N},{default:Ye(()=>[Xe("Crear producto")]),_:1},8,["disable"]))])],64))}});export{wu as default};
