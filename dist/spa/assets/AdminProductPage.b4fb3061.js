import{r as B,a as r,h as p,az as W,b as X,f as Y,aA as Z,g as ee,s as z,aB as g,c as te,V as ae,E as T,S as P,F as C,L as $,P as n,I as s,W as h,R as V,N as _,Q as A,U as E,_ as oe,X as le,Y as ne,B as re,O,M as se,G as ie}from"./index.a8db99c8.js";import{a as ue,u as ce}from"./use-dark.93d8ea25.js";import{u as de,b as fe}from"./use-form.7422adbb.js";import{u as me,Q as I,a as pe}from"./QSeparator.650a660d.js";import{a as ve,Q as ge,b as _e}from"./QCardActions.b6bdca9a.js";import{F as j}from"./fetchData.11d9e322.js";import{u as be}from"./use-quasar.ff238c4f.js";import{a as he}from"./api.45c934da.js";function xe(a,i){const e=B(null),c=r(()=>a.disable===!0?null:p("span",{ref:e,class:"no-outline",tabindex:-1}));function d(o){const l=i.value;o!==void 0&&o.type.indexOf("key")===0?l!==null&&document.activeElement!==l&&l.contains(document.activeElement)===!0&&l.focus():e.value!==null&&(o===void 0||l!==null&&l.contains(o.target)===!0)&&e.value.focus()}return{refocusTargetEl:c,refocusTarget:d}}var ke={xs:30,sm:35,md:40,lg:50,xl:60};const ye={...ce,...Z,...de,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:a=>a==="tf"||a==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},Ve=["update:modelValue"];function Ce(a,i){const{props:e,slots:c,emit:d,proxy:o}=ee(),{$q:l}=o,x=ue(e,l),u=B(null),{refocusTargetEl:v,refocusTarget:S}=xe(e,u),k=W(e,ke),b=r(()=>e.val!==void 0&&Array.isArray(e.modelValue)),q=r(()=>{const t=g(e.val);return b.value===!0?e.modelValue.findIndex(m=>g(m)===t):-1}),f=r(()=>b.value===!0?q.value>-1:g(e.modelValue)===g(e.trueValue)),y=r(()=>b.value===!0?q.value===-1:g(e.modelValue)===g(e.falseValue)),N=r(()=>f.value===!1&&y.value===!1),F=r(()=>e.disable===!0?-1:e.tabindex||0),D=r(()=>`q-${a} cursor-pointer no-outline row inline no-wrap items-center`+(e.disable===!0?" disabled":"")+(x.value===!0?` q-${a}--dark`:"")+(e.dense===!0?` q-${a}--dense`:"")+(e.leftLabel===!0?" reverse":"")),R=r(()=>{const t=f.value===!0?"truthy":y.value===!0?"falsy":"indet",m=e.color!==void 0&&(e.keepColor===!0||(a==="toggle"?f.value===!0:y.value!==!0))?` text-${e.color}`:"";return`q-${a}__inner relative-position non-selectable q-${a}__inner--${t}${m}`}),L=r(()=>{const t={type:"checkbox"};return e.name!==void 0&&Object.assign(t,{".checked":f.value,"^checked":f.value===!0?"checked":void 0,name:e.name,value:b.value===!0?e.val:e.trueValue}),t}),M=fe(L),K=r(()=>{const t={tabindex:F.value,role:a==="toggle"?"switch":"checkbox","aria-label":e.label,"aria-checked":N.value===!0?"mixed":f.value===!0?"true":"false"};return e.disable===!0&&(t["aria-disabled"]="true"),t});function w(t){t!==void 0&&(z(t),S(t)),e.disable!==!0&&d("update:modelValue",U(),t)}function U(){if(b.value===!0){if(f.value===!0){const t=e.modelValue.slice();return t.splice(q.value,1),t}return e.modelValue.concat([e.val])}if(f.value===!0){if(e.toggleOrder!=="ft"||e.toggleIndeterminate===!1)return e.falseValue}else if(y.value===!0){if(e.toggleOrder==="ft"||e.toggleIndeterminate===!1)return e.trueValue}else return e.toggleOrder!=="ft"?e.trueValue:e.falseValue;return e.indeterminateValue}function G(t){(t.keyCode===13||t.keyCode===32)&&z(t)}function H(t){(t.keyCode===13||t.keyCode===32)&&w(t)}const J=i(f,N);return Object.assign(o,{toggle:w}),()=>{const t=J();e.disable!==!0&&M(t,"unshift",` q-${a}__native absolute q-ma-none q-pa-none`);const m=[p("div",{class:R.value,style:k.value,"aria-hidden":"true"},t)];v.value!==null&&m.push(v.value);const Q=e.label!==void 0?X(c.default,[e.label]):Y(c.default);return Q!==void 0&&m.push(p("div",{class:`q-${a}__label q-anchor--skip`},Q)),p("div",{ref:u,class:D.value,...K.value,onClick:w,onKeydown:G,onKeyup:H},m)}}var Se=te({name:"QToggle",props:{...ye,icon:String,iconColor:String},emits:Ve,setup(a){function i(e,c){const d=r(()=>(e.value===!0?a.checkedIcon:c.value===!0?a.indeterminateIcon:a.uncheckedIcon)||a.icon),o=r(()=>e.value===!0?a.iconColor:null);return()=>[p("div",{class:"q-toggle__track"}),p("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},d.value!==void 0?[p(ae,{name:d.value,color:o.value})]:void 0)]}return Ce("toggle",i)}});const qe=a=>(le("data-v-04f9ca72"),a=a(),ne(),a),we={class:"q-ml-xs q-mr-xs row items-start q-gutter-md",style:{width:"99%","margin-top":"2px"}},Ie=qe(()=>_("br",null,null,-1)),Pe={class:"q-ml-md"},$e={class:"text-negative q-mr-md",style:{"font-weight":"bold","font-size":"large"}},Ae={class:"text-negative",style:{"font-weight":"bold","font-size":"large"}},Be=T({__name:"ProductCardAdmin",props:{title:String,photo:String,price:Number,grm:Number,description:String,isVisible:Boolean},setup(a){me();const i=be(),e=B(!1);function c(){i.notify({message:"Producto eliminado",color:"negative"})}const d=new j,o=a;e.value=o.isVisible;const l=async()=>{const x={isVisible:e.value};try{let v=await(await fetch(`${he.getAllProducts}${o.title}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)})).json();e.value=v.isVisible}catch(u){console.log(u)}};return(x,u)=>{const v=P("q-title"),S=P("router-link");return C(),$("div",we,[n(ve,{class:"my-card full-width",style:{width:"99%"}},{default:s(()=>[n(I,{vertical:""},{default:s(()=>[n(Se,{modelValue:e.value,"onUpdate:modelValue":u[0]||(u[0]=k=>e.value=k),onClick:l,color:"negative",label:e.value?"Visible":"No visible"},null,8,["modelValue","label"])]),_:1}),n(I,{horizontal:""},{default:s(()=>[n(ge,{class:"col-5",src:o.photo,height:"90px",style:{"border-radius":"10px","margin-top":"2px"}},null,8,["src"]),n(I,{style:{"text-transform":"capitalize"}},{default:s(()=>[n(v,{style:{color:"black","font-weight":"bold","text-transform":"capitalize"}},{default:s(()=>[h(V(o.title),1)]),_:1}),Ie,h(" "+V(o.description),1)]),_:1})]),_:1}),n(pe),n(_e,{style:{display:"flex","flex-direction":"row","justify-content":"space-between"}},{default:s(()=>[_("div",Pe,[_("span",$e,"$"+V(o.price),1),_("span",Ae,V(o.grm),1)]),n(A,{flat:"",color:"dark",round:"",class:"q-mr-md",onClick:u[1]||(u[1]=k=>(E(d).deleteOneProduct(o.title),c()))},{default:s(()=>[h(" Eliminar")]),_:1}),n(S,{to:{name:"adminProductName",params:{name:o.title}}},{default:s(()=>[n(A,{flat:"",color:"negative",round:"",class:"q-mr-md"},{default:s(()=>[h(" Editar")]),_:1})]),_:1},8,["to"])]),_:1})]),_:1})])}}});var Ne=oe(Be,[["__scopeId","data-v-04f9ca72"]]);const Qe=_("div",{class:"text-h6 q-mt-md"},"Productos",-1),ze={style:{display:"flex","flex-direction":"row","flex-wrap":"wrap","justify-content":"start",gap:"15px"}},Me=T({__name:"AdminProductPage",setup(a){const i=new j,e=i.getAllProductsMethod();return re(async()=>{i.fetchAllProducts()}),(c,d)=>{const o=P("router-link");return C(),$(O,null,[Qe,n(o,{to:{name:"adminProductName",params:{name:"empty"}}},{default:s(()=>[n(A,{color:"negative",class:"q-mt-lg q-mb-lg"},{default:s(()=>[h(" Crear producto ")]),_:1})]),_:1}),_("div",ze,[(C(!0),$(O,null,se(E(e),l=>(C(),ie(Ne,{key:l.name,title:l.name,photo:l.photo,grm:l.grm,description:l.description,price:l.price,isVisible:l.isVisible,style:{width:"25%"}},null,8,["title","photo","grm","description","price","isVisible"]))),128))])],64)}}});export{Me as default};
